Claude Rules :look👀

# 初心者向け運用ガイド 🔰

> **対象**: WEBアプリ開発初心者  
> **目的**: 1人でOmniyを安全に運用するための具体的手順  
> **更新日**: 2025-01-31

---

## 📱 **毎日の運用タスク（30分）**

### 1. システム監視チェック（10分）

#### **Firebaseコンソールでの確認**
```
1. https://console.firebase.google.com にアクセス
2. あなたのプロジェクト（Omniy）を選択
3. 左メニューの「Functions」をクリック
4. 以下を確認：
   ✅ エラー数が0〜2件以内（正常）
   ❌ エラー数が10件以上（要対応）
   
5. 左メニューの「Hosting」をクリック
6. 以下を確認：
   ✅ 「動作中」と表示（正常）
   ❌ 「エラー」と表示（要対応）
```

#### **実際の画面での確認**
```
1. https://your-app-domain.web.app にアクセス
2. 以下の操作をテスト：
   ✅ ログインできる
   ✅ ダッシュボードが表示される
   ✅ 投稿作成画面が開く
   
所要時間: 3分
```

### 2. 重要エラーの確認（10分）

#### **Firebaseでエラーログ確認**
```
Firebaseコンソール > Functions > ログ

【正常なログの例】
✅ "Schedule executed successfully"
✅ "User authenticated"
✅ "Post created"

【注意が必要なログの例】
⚠️ "Instagram API rate limit"
⚠️ "Payment failed"
❌ "Database connection error"
```

#### **エラー対応の基本**
```yaml
軽微なエラー（1-2件/日）:
  対応: 翌日まで様子見
  
中程度のエラー（3-9件/日）:
  対応: その日中に調査
  方法: エラーメッセージをGoogle検索
  
重大なエラー（10件以上/日）:
  対応: 即座に調査・対応
  方法: 下記「緊急対応」参照
```

### 3. ユーザーサポート対応（10分）

#### **サポートメール確認**
```
1. サポート用メールアドレスをチェック
2. 以下の分類で対応：

【即答可能（2分/件）】
✅ ログイン方法
✅ パスワードリセット
✅ 基本的な使い方

【調査必要（10分/件）】
⚠️ 投稿が失敗する
⚠️ 決済がうまくいかない
⚠️ アカウント連携エラー

【エスカレーション（翌日対応）】
❌ 技術的な複雑な問題
❌ 新機能リクエスト
```

#### **よくある質問への回答テンプレート**
```
【ログインできない】
「パスワードリセットをお試しください。
 ログイン画面の「パスワードを忘れた方」をクリックし、
 メールアドレスを入力してください。」

【投稿が予約時間に投稿されない】
「Instagram側の一時的な問題の可能性があります。
 30分後に再度確認していただけますでしょうか。
 解決しない場合は再度ご連絡ください。」

【決済がうまくいかない】
「申し訳ございません。以下をご確認ください：
 1. カード情報に誤りがないか
 2. カードの有効期限が切れていないか
 3. 利用限度額に達していないか」
```

---

## 📊 **週次タスク（2時間）**

### 1. パフォーマンス指標レビュー（30分）

#### **Firebase Analyticsでの確認**
```
1. Firebaseコンソール > Analytics > ダッシュボード
2. 以下の数値を記録：

【ユーザー指標】
- アクティブユーザー数: ___人
- 新規ユーザー数: ___人
- セッション継続時間: ___分

【技術指標】
- ページ読み込み時間: ___秒
- エラー率: ___%
- アプリクラッシュ率: ___%

【目標値】
✅ ページ読み込み: 3秒以内
✅ エラー率: 1%以内
✅ クラッシュ率: 0.1%以内
```

#### **コスト確認**
```
1. Firebaseコンソール > 使用量とお支払い
2. 今月の利用料金を確認
3. 予想料金が予算内かチェック

【予算目安】
- 開発段階: $10-30/月
- 運用開始: $50-100/月
- 成長期: $100-300/月
```

### 2. 新機能のテスト（45分）

#### **テスト手順**
```
週に1回、以下の機能を実際にテスト：

【基本機能テスト（15分）】
1. 新規アカウント作成
2. Instagram連携
3. 投稿作成
4. スケジュール設定
5. 実際の投稿

【決済機能テスト（15分）】
1. 無料プランでの制限確認
2. 有料プランへのアップグレード
3. 決済成功確認
4. 機能制限解除確認

【エラーハンドリングテスト（15分）】
1. 無効なデータ入力
2. ネットワークエラー想定
3. エラーメッセージの表示確認
```

### 3. ドキュメント更新（45分）

#### **更新すべきドキュメント**
```
【ユーザー向け】
- FAQ（新しい質問があった場合）
- 使い方ガイド（機能追加時）
- トラブルシューティング

【運用者向け】
- 障害対応履歴
- パフォーマンス記録
- 改善案メモ
```

---

## 🛠️ **月次タスク（1日）**

### 1. セキュリティアップデート（2時間）

#### **依存関係の更新**
```bash
# フロントエンドの更新
cd frontend
npm audit                    # セキュリティ脆弱性チェック
npm audit fix               # 自動修正
npm update                  # パッケージ更新

# バックエンドの更新
cd ../functions
npm audit
npm audit fix
npm update

# テスト実行
npm run test               # すべてのテストが通ることを確認
```

#### **Firebase セキュリティルール確認**
```
1. Firebaseコンソール > Firestore Database > ルール
2. 以下が正しく設定されているか確認：
   ✅ 認証必須になっている
   ✅ ユーザーが自分のデータのみアクセス可能
   ✅ 管理者権限が適切に制限されている
```

### 2. バックアップ確認（1時間）

#### **自動バックアップの確認**
```
1. Firebaseコンソール > Firestore Database > バックアップ
2. 以下を確認：
   ✅ 毎日のバックアップが作成されている
   ✅ 過去30日分のバックアップが保存されている
   ✅ バックアップサイズが異常に大きくない
```

#### **手動バックアップの実行**
```bash
# 重要データの手動エクスポート（月1回）
firebase firestore:export gs://your-backup-bucket/$(date +%Y%m%d)

# 設定ファイルのバックアップ
cp firebase.json backup/firebase-$(date +%Y%m%d).json
cp firestore.rules backup/firestore-rules-$(date +%Y%m%d).rules
```

### 3. パフォーマンス最適化（3時間）

#### **使用量分析**
```
1. Firebase Analytics で以下を確認：
   - 最も使用される機能
   - 最もエラーが多い機能
   - ユーザーが離脱しやすいページ

2. 改善案の検討：
   - エラーが多い機能の修正
   - 使用頻度の低い機能の簡素化
   - ユーザビリティの改善
```

#### **コスト最適化**
```
1. Firebase使用量レポート確認
2. 以下の最適化を検討：
   - 不要なCloud Functions の削除
   - データベースクエリの効率化
   - 画像ストレージの最適化
```

---

## 🚨 **緊急時対応**

### レベル1: サイトが表示されない
```
1. https://your-app-domain.web.app にアクセス確認
2. Firebaseコンソール > Hosting で状態確認
3. 「再デプロイ」ボタンをクリック
4. 5分待って再確認
5. 解決しない場合はレベル2へ
```

### レベル2: 機能が動作しない
```
1. Firebaseコンソール > Functions でエラー確認
2. エラーメッセージをコピー
3. 以下で検索：
   - Google検索
   - Stack Overflow
   - Firebase公式ドキュメント
4. 解決策が見つからない場合はレベル3へ
```

### レベル3: データが消失した
```
1. 慌てずに以下を確認：
   - Firestore Database でデータが本当に消えているか
   - 一時的なネットワークエラーではないか
2. バックアップからの復旧：
   - Firestore > バックアップから最新を選択
   - 復旧実行
3. 原因調査と再発防止策の検討
```

---

## 📞 **サポートリソース**

### 公式ドキュメント
- Firebase: https://firebase.google.com/docs
- Vue.js: https://vuejs.org/guide/
- TypeScript: https://www.typescriptlang.org/docs/

### コミュニティ
- Stack Overflow（技術的質問）
- Firebase Discord（リアルタイム相談）
- Vue.js Discord（フロントエンド相談）

### 緊急時連絡先
```
Firebase サポート: https://firebase.google.com/support/contact
Stripe サポート: https://support.stripe.com
Instagram API サポート: https://developers.facebook.com/support
```

---

## ✅ **運用チェックリスト**

### 毎日（30分）
- [ ] Firebaseコンソールでエラー確認
- [ ] アプリの基本動作確認
- [ ] サポートメール対応

### 毎週（2時間）
- [ ] パフォーマンス指標確認
- [ ] 全機能テスト実行
- [ ] ドキュメント更新

### 毎月（1日）
- [ ] セキュリティアップデート
- [ ] バックアップ確認
- [ ] コスト最適化検討

この運用ガイドに従えば、初心者でも安全にOmniyを運用できます！ 🎉