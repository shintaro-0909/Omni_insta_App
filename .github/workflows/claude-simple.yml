name: Claude Simple Test

on:
  issue_comment:
    types: [created]
  issues:
    types: [opened]

jobs:
  claude-test:
    # ã‚·ãƒ³ãƒ—ãƒ«ãªæ¡ä»¶ã§ãƒ†ã‚¹ãƒˆ
    if: contains(github.event.comment.body, '@claude') || contains(github.event.issue.body, '@claude')
    
    runs-on: ubuntu-latest
    timeout-minutes: 10
    
    permissions:
      contents: read
      issues: write
      pull-requests: write
      
    steps:
      - name: Debug event info
        run: |
          echo "Event name: ${{ github.event_name }}"
          echo "Action: ${{ github.event.action }}"
          if [ "${{ github.event_name }}" = "issue_comment" ]; then
            echo "Comment body: ${{ github.event.comment.body }}"
          elif [ "${{ github.event_name }}" = "issues" ]; then
            echo "Issue body: ${{ github.event.issue.body }}"
          fi
      
      - name: Simple Claude response
        uses: actions/github-script@v7
        with:
          script: |
            const { owner, repo } = context.repo;
            const issue_number = context.issue.number;
            
            const comment = `ğŸ¤– **Claude Code ãƒ†ã‚¹ãƒˆå¿œç­”**
            
            âœ… GitHub Action ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ï¼
            ğŸ“… ä»Šæ—¥ã®æ—¥ä»˜: ${new Date().toLocaleDateString('ja-JP')}
            
            **ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±:**
            - Event: ${{ github.event_name }}
            - Action: ${{ github.event.action }}
            
            ---
            *Claude Code GitHub Actions ãƒ†ã‚¹ãƒˆ*`;
            
            github.rest.issues.createComment({
              owner,
              repo,
              issue_number,
              body: comment
            });