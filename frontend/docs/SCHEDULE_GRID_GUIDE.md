# 📊 Schedule Grid User Guide

## 概要

Schedule Gridは、GoogleスプレッドシートライクなUIでInstagram投稿を効率的に管理できる機能です。

## 🚀 アクセス方法

1. **メインナビゲーション**: `予約管理` → `グリッド管理`
2. **直接URL**: `/schedules/grid`
3. **SchedulesViewから**: 「📊 グリッドビューで管理」ボタン

## 🎯 主要機能

### ✏️ インライン編集
- **日時**: クリックで直接編集（datetime-local入力）
- **アカウント**: ドロップダウンで選択
- **投稿文**: テキストエリアで編集（2200文字制限）
- **画像URL**: URL入力とプレビュー
- **ステータス**: pending, active, paused, completed, error

### 🔄 一括操作
- **複数選択**: Ctrlクリックまたはチェックボックス
- **一括予約**: 選択した投稿を間隔指定で予約
- **ドラッグ&ドロップ**: 投稿順序の変更
- **CSVエクスポート**: データの書き出し

### 🔍 フィルタリング
- **ステータス別**: 全ステータス、待機中、アクティブ等
- **アカウント別**: Instagram アカウント単位
- **リアルタイム更新**: フィルタ即座反映

### 📝 詳細編集サイドバー
- **基本情報**: タイトル、日時、アカウント、ステータス
- **投稿内容**: 投稿文、ハッシュタグ提案
- **メディア**: 画像URL、ファイルアップロード
- **スケジュール設定**: 一回限り、繰り返し、ランダム

## ⌨️ キーボードショートカット

| ショートカット | 機能 |
|---------------|------|
| `Ctrl + Enter` | 新しい投稿追加 |
| `Ctrl + Shift + S` | 一括予約ダイアログ |
| `Ctrl + C` | セル内容コピー |
| `Ctrl + V` | セル内容貼り付け |
| `Delete` | 選択行削除 |
| `Escape` | 編集キャンセル |
| `Enter` | 編集完了 |

## 🎨 セルタイプと表示

### 📅 日時セル
- **表示**: `YYYY/MM/DD HH:mm` 形式
- **編集**: `datetime-local` 入力
- **バリデーション**: 過去日時禁止

### 👤 アカウントセル
- **表示**: アバター + @ユーザー名
- **編集**: ドロップダウン選択
- **バリデーション**: 必須選択

### 📝 テキストセル
- **表示**: 50文字でトリミング + 文字数
- **編集**: テキストエリア
- **バリデーション**: 2200文字制限

### 🖼️ 画像セル
- **表示**: サムネイル画像（80x80px）
- **編集**: URL入力
- **バリデーション**: 有効URL検証

### 🏷️ ステータスセル
- **表示**: アイコン + カラーバッジ
- **編集**: ドロップダウン選択
- **色分け**: pending=灰、active=緑、error=赤等

## ⚡ パフォーマンス最適化

### 🔄 自動同期
- **デバウンス**: 300ms後に自動保存
- **ステータス表示**: 同期中、同期済み、エラー
- **ローカル編集**: 即座反映、バックグラウンド同期

### 📊 データ管理
- **仮想スクロール**: 大量データ対応
- **レンジ選択**: 効率的な範囲操作
- **フィルタリング**: クライアントサイド高速処理

## 🛠️ カスタマイズ

### 🎨 AG Grid テーマ
- **ファイル**: `frontend/src/styles/ag-grid-theme.css`
- **テーマクラス**: `.ag-theme-omniy`
- **カラーパレット**: Omniyブランドカラー対応

### 📱 レスポンシブ対応
- **デスクトップ**: フル機能
- **タブレット**: 最適化レイアウト
- **モバイル**: 基本機能（編集は簡略化）

## 🔧 設定オプション

### グリッド設定
```typescript
const gridOptions = {
  pagination: false,
  rowHeight: 60,
  headerHeight: 40,
  enableRangeSelection: true,
  enableFillHandle: true,
  rowDragManaged: true,
  animateRows: true
}
```

### 列設定
```typescript
const columnDefs = [
  { field: 'datetime', width: 180, pinned: 'left' },
  { field: 'accountId', width: 200 },
  { field: 'text', width: 350 },
  { field: 'imageUrl', width: 150 },
  { field: 'status', width: 130 }
]
```

## 🐛 トラブルシューティング

### よくある問題

**Q: セルが編集できない**
A: クリックして編集モードに入っているか確認。バリデーションエラーがある場合は赤枠で表示されます。

**Q: 同期エラーが発生**  
A: ネットワーク接続を確認。エラーメッセージを参照して該当データを修正してください。

**Q: ドラッグ&ドロップが動作しない**
A: ドラッグハンドル（左端のアイコン）を使用してください。

**Q: フィルタが効かない**
A: フィルタークリアボタンで一度リセットし、再度適用してください。

### エラーメッセージ

- `日時は必須です`: 日時セルが空の場合
- `過去の日時は設定できません`: 現在より前の日時指定
- `アカウントを選択してください`: アカウント未選択
- `投稿文は2200文字以内で入力してください`: 文字数制限超過
- `有効なURLを入力してください`: 不正なURL形式

## 📈 今後の機能拡張

### 計画中の機能
- **コメント機能**: セル単位でのメモ
- **条件付きフォーマット**: ステータス別の自動色分け
- **高度なフィルタ**: 日付範囲、複合条件
- **テンプレート機能**: 投稿パターンの保存
- **AIアシスト**: 投稿文の自動生成

### 技術的改善
- **仮想スクロール**: 10,000行以上の対応
- **オフライン対応**: PWA化でオフライン編集
- **リアルタイム同期**: WebSocket での即時反映
- **高度なバリデーション**: カスタムルール設定

---

## 🤖 AI Integration Notes

このドキュメントは、Schedule Grid MVPの実装と同時に作成されました。ユーザビリティの向上と運用効率化を目的としています。

**実装チーム**: Claude Code + Human Developer
**更新日**: 2025年6月17日  
**バージョン**: MVP 1.0